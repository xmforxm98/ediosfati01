<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eidos Fati - Support</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #FFFFFF;
            background: #1A1A2E;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            border-radius: 20px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            font-weight: bold;
        }
        
        h1 {
            color: #FFFFFF;
            margin-bottom: 10px;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h2 {
            color: #FFFFFF;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 2px solid #FF6B6B;
            padding-bottom: 10px;
        }
        
        .app-description {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature h3 {
            color: #FFFFFF;
            margin-bottom: 10px;
        }
        
        .feature p {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .faq-item {
            margin-bottom: 25px;
            border-left: 4px solid #FF6B6B;
            padding-left: 20px;
        }
        
        .faq-question {
            font-weight: 600;
            color: #FFFFFF;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .faq-answer {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.7;
        }
        
        .contact-info {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
            text-align: center;
            padding: 30px;
            border-radius: 15px;
        }
        
        .contact-email {
            font-size: 1.3rem;
            font-weight: 600;
            margin: 15px 0;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: inline-block;
        }
        
        .contact-email a {
            color: white;
            text-decoration: none;
        }
        
        .contact-email a:hover {
            text-decoration: underline;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">EF</div>
            <h1>Eidos Fati</h1>
            <p class="subtitle">Discover Your Cosmic Blueprint Through Ancient Wisdom</p>
        </div>
        
        <div class="section">
            <h2>üåü About Eidos Fati</h2>
            <p class="app-description">
                Eidos Fati is a revolutionary app that combines ancient Eastern wisdom with modern technology to reveal your unique cosmic blueprint. Through the power of Eidos analysis, daily fortune readings, and personalized tarot insights, discover who you truly are and unlock your potential.
            </p>
            
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üîÆ</div>
                    <h3>Eidos Analysis</h3>
                    <p>Discover your unique personality archetype through our advanced cosmic analysis system.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üíù</div>
                    <h3>Daily Fortune</h3>
                    <p>Get personalized daily insights for love, career, and life guidance tailored to your cosmic profile.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üÉè</div>
                    <h3>Tarot Readings</h3>
                    <p>Receive meaningful tarot card interpretations that resonate with your personal journey.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üåô</div>
                    <h3>Cosmic Insights</h3>
                    <p>Understand your place in the universe through Five Elements theory and numerology.</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>‚ùì Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question">What is Eidos Analysis?</div>
                <div class="faq-answer">
                    Eidos Analysis is our proprietary system that combines Eastern Five Elements theory, numerology, and cosmic energy patterns to create a comprehensive personality profile. It reveals your core motivations, strengths, and life path.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How accurate are the daily fortune readings?</div>
                <div class="faq-answer">
                    Our fortune readings are generated using advanced algorithms that consider your personal cosmic blueprint, current planetary alignments, and ancient wisdom traditions. They're designed to provide meaningful guidance rather than predict specific events.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Is my personal information secure?</div>
                <div class="faq-answer">
                    Yes, we take privacy seriously. All personal data is encrypted and stored securely. We never share your information with third parties, and you can delete your account and data at any time.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Can I use the app without creating an account?</div>
                <div class="faq-answer">
                    While you can explore some features, creating an account allows for personalized readings and saves your cosmic profile for more accurate insights over time.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How often should I check my daily fortune?</div>
                <div class="faq-answer">
                    Daily fortune readings are updated each day and are most relevant when checked in the morning. However, you can revisit them throughout the day for continued guidance.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">What if I don't resonate with my Eidos type?</div>
                <div class="faq-answer">
                    Eidos types are meant to be guiding insights rather than rigid categories. If something doesn't resonate, consider it as one perspective among many, and focus on the aspects that feel meaningful to you.
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>üóëÔ∏è Account Deletion</h2>
            <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">Need to delete your account? Sign in below to permanently remove all your data.</p>
            
            <div style="background: rgba(255, 243, 205, 0.1); border: 1px solid rgba(255, 234, 167, 0.3); color: #ffc107; padding: 15px; border-radius: 10px; margin: 20px 0; font-size: 14px;">
                <strong>‚ö†Ô∏è Warning:</strong> This will permanently delete all your Eidos analysis, daily fortune history, tarot records, and profile data. This action cannot be undone.
            </div>
            
            <div id="loginForm" style="max-width: 400px; margin: 20px auto;">
                <div style="margin: 15px 0; text-align: left;">
                    <label style="display: block; margin-bottom: 5px; color: rgba(255, 255, 255, 0.9); font-weight: 500;">Email</label>
                    <input type="email" id="email" placeholder="Enter your account email" required style="width: 100%; padding: 12px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 8px; background: rgba(255, 255, 255, 0.1); color: white; font-size: 16px; box-sizing: border-box;">
                </div>
                
                <div style="margin: 15px 0; text-align: left;">
                    <label style="display: block; margin-bottom: 5px; color: rgba(255, 255, 255, 0.9); font-weight: 500;">Password</label>
                    <input type="password" id="password" placeholder="Enter your current password" required style="width: 100%; padding: 12px; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 8px; background: rgba(255, 255, 255, 0.1); color: white; font-size: 16px; box-sizing: border-box;">
                </div>
                
                <button onclick="loginUser()" id="loginBtn" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%; margin: 10px 0; transition: transform 0.2s, box-shadow 0.2s;">
                    Sign In to Delete Account
                </button>
            </div>
            
            <div id="deleteForm" style="max-width: 400px; margin: 20px auto; display: none;">
                <p style="margin: 20px 0; color: rgba(255, 255, 255, 0.8); text-align: center;">
                    You are now signed in. Click below to permanently delete your account.
                </p>
                
                <button onclick="deleteAccount()" id="deleteBtn" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%; margin: 10px 0; transition: transform 0.2s, box-shadow 0.2s;">
                    Permanently Delete Account
                </button>
                
                <button onclick="logout()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%; margin-top: 10px;">
                    Cancel
                </button>
            </div>
            
            <div id="status" style="margin: 20px 0; padding: 15px; border-radius: 10px; font-weight: 500; text-align: center; display: none;"></div>
        </div>
        
        <div class="contact-info">
            <h2>üìß Contact & Support</h2>
            <p>Need help or have questions? We're here to assist you on your cosmic journey.</p>
            <div class="contact-email">
                <a href="mailto:xmforxm98@gmail.com">xmforxm98@gmail.com</a>
            </div>
            <p>We typically respond within 24 hours. For technical issues, please include your device model and app version.</p>
            <p style="margin-top: 20px;">
                <a href="privacy-policy.html" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">Privacy Policy</a>
            </p>
        </div>
        
        <div class="footer">
            <p>&copy; 2024 Eidos Fati. All rights reserved.</p>
            <p>Made with ‚ú® cosmic energy and üíú for seekers of wisdom</p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            deleteUser,
            EmailAuthProvider,
            reauthenticateWithCredential,
            signOut
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { 
            getFirestore, 
            doc, 
            deleteDoc,
            collection,
            query,
            where,
            getDocs
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB7-qcpY8gg0aaGDlHgRYSLIpK8PTEhGk8",
            authDomain: "innerfive-e9583.firebaseapp.com",
            projectId: "innerfive-e9583",
            storageBucket: "innerfive-e9583.firebasestorage.app",
            messagingSenderId: "543654806439",
            appId: "1:543654806439:web:3fb98e8c45e89d6b6ad7e7",
            measurementId: "G-4JRXN6PJCX"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.loginUser = async function() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');

            if (!email || !password) {
                showStatus('Please enter both email and password.', 'error');
                return;
            }

            try {
                loginBtn.disabled = true;
                loginBtn.innerHTML = 'Signing in...';

                await signInWithEmailAndPassword(auth, email, password);
                
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('deleteForm').style.display = 'block';
                showStatus('Successfully signed in! You can now proceed with account deletion.', 'success');

            } catch (error) {
                console.error('Login error:', error);
                let errorMessage = 'Login failed.';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = 'No account found with this email.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = 'Incorrect password.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Invalid email format.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = 'Too many failed attempts. Please try again later.';
                        break;
                    default:
                        errorMessage = `Error: ${error.message}`;
                }
                
                showStatus(errorMessage, 'error');
            } finally {
                loginBtn.disabled = false;
                loginBtn.innerHTML = 'Sign In to Delete Account';
            }
        };

        window.deleteAccount = async function() {
            const deleteBtn = document.getElementById('deleteBtn');
            const user = auth.currentUser;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!user) {
                showStatus('Please sign in first.', 'error');
                return;
            }

            if (!confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                return;
            }

            try {
                deleteBtn.disabled = true;
                deleteBtn.innerHTML = 'Deleting...';

                showStatus('Deleting account data...', 'info');

                await deleteUserData(user.uid);

                const credential = EmailAuthProvider.credential(email, password);
                await reauthenticateWithCredential(user, credential);

                await deleteUser(user);

                showStatus('Account successfully deleted.', 'success');
                
                document.getElementById('deleteForm').style.display = 'none';

            } catch (error) {
                console.error('Account deletion error:', error);
                let errorMessage = 'Account deletion failed.';
                
                switch (error.code) {
                    case 'auth/requires-recent-login':
                        errorMessage = 'Please sign in again for security purposes.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = 'Incorrect password.';
                        break;
                    default:
                        errorMessage = `Error: ${error.message}`;
                }
                
                showStatus(errorMessage, 'error');
            } finally {
                deleteBtn.disabled = false;
                deleteBtn.innerHTML = 'Permanently Delete Account';
            }
        };

        async function deleteUserData(userId) {
            try {
                const userRef = doc(db, 'users', userId);
                await deleteDoc(userRef);

                const reportsQuery = query(
                    collection(db, 'analysis_reports'),
                    where('userId', '==', userId)
                );
                const reportsSnapshot = await getDocs(reportsQuery);
                
                for (const reportDoc of reportsSnapshot.docs) {
                    await deleteDoc(reportDoc.ref);
                }

                const fortuneQuery = query(
                    collection(db, 'daily_fortune'),
                    where('userId', '==', userId)
                );
                const fortuneSnapshot = await getDocs(fortuneQuery);
                
                for (const fortuneDoc of fortuneSnapshot.docs) {
                    await deleteDoc(fortuneDoc.ref);
                }

                console.log('Firestore data deletion completed');
            } catch (error) {
                console.error('Firestore data deletion error:', error);
                throw error;
            }
        }

        window.logout = async function() {
            try {
                await signOut(auth);
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('deleteForm').style.display = 'none';
                document.getElementById('email').value = '';
                document.getElementById('password').value = '';
                showStatus('Signed out successfully.', 'info');
            } catch (error) {
                console.error('Logout error:', error);
                showStatus('Error occurred during sign out.', 'error');
            }
        };

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.display = 'block';
            
            if (type === 'success') {
                status.style.background = 'rgba(212, 237, 218, 0.2)';
                status.style.color = '#4caf50';
                status.style.border = '1px solid rgba(76, 175, 80, 0.3)';
            } else if (type === 'error') {
                status.style.background = 'rgba(248, 215, 218, 0.2)';
                status.style.color = '#f44336';
                status.style.border = '1px solid rgba(244, 67, 54, 0.3)';
            } else if (type === 'info') {
                status.style.background = 'rgba(209, 236, 241, 0.2)';
                status.style.color = '#2196f3';
                status.style.border = '1px solid rgba(33, 150, 243, 0.3)';
            }
            
            if (type === 'success' || type === 'info') {
                setTimeout(() => {
                    status.style.display = 'none';
                }, 5000);
            }
        }

        document.getElementById('email').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('password').focus();
            }
        });

        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                window.loginUser();
            }
        });
    </script>
</body>
</html>